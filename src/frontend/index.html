<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Problem Solver Game</title>
    <link rel="stylesheet" href="styles/game.css">
    <link rel="stylesheet" href="styles/characters.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="aws-logo">
                <i class="fab fa-aws"></i>
            </div>
            <h1>AWS Problem Solver Game</h1>
            <div class="loading-spinner"></div>
            <p>게임을 로딩 중입니다...</p>
        </div>
    </div>

    <!-- Main Game Container -->
    <div id="game-container" class="game-container hidden">
        <!-- Header -->
        <header class="game-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fab fa-aws"></i>
                    <span>AWS Problem Solver</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                    <span class="progress-text" id="progress-text">0/0</span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="user-stats">
                    <div class="stat-item">
                        <i class="fas fa-trophy"></i>
                        <span id="user-score">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-star"></i>
                        <span id="user-level">1</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-target"></i>
                        <span id="user-accuracy">0%</span>
                    </div>
                </div>
                <button class="settings-btn" id="settings-btn">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="game-main">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="screen active">
                <div class="welcome-content">
                    <h1>AWS Solutions Architect가 되어보세요!</h1>
                    <p>다양한 비즈니스 상황의 NPC들이 가져오는 클라우드 문제를 해결하며 AWS 전문가로 성장하세요.</p>
                    
                    <div class="game-modes">
                        <div class="mode-card" data-mode="random">
                            <div class="mode-icon">
                                <i class="fas fa-random"></i>
                            </div>
                            <h3>랜덤 문제</h3>
                            <p>다양한 AWS 서비스 문제를 랜덤으로 풀어보세요</p>
                        </div>
                        
                        <div class="mode-card" data-mode="npc">
                            <div class="mode-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3>NPC 시나리오</h3>
                            <p>캐릭터들의 실제 비즈니스 문제를 해결해보세요</p>
                        </div>
                        
                        <div class="mode-card" data-mode="adaptive">
                            <div class="mode-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3>적응형 학습</h3>
                            <p>당신의 실력에 맞는 맞춤형 문제를 제공합니다</p>
                        </div>
                    </div>
                    
                    <div class="user-setup">
                        <input type="text" id="username-input" placeholder="사용자 이름을 입력하세요" maxlength="20">
                        <button id="start-game-btn" class="primary-btn">게임 시작</button>
                    </div>
                </div>
            </div>

            <!-- NPC Selection Screen -->
            <div id="npc-selection-screen" class="screen">
                <div class="npc-selection-content">
                    <h2>어떤 전문가의 도움을 받으시겠어요?</h2>
                    <div class="npc-grid">
                        <div class="npc-card" data-npc="alex_ceo">
                            <div class="npc-avatar alex"></div>
                            <div class="npc-info">
                                <h3>Alex</h3>
                                <p class="npc-title">스타트업 CEO</p>
                                <p class="npc-description">비즈니스 성장과 비용 최적화에 관심이 많습니다</p>
                                <div class="npc-expertise">
                                    <span class="expertise-tag">EC2</span>
                                    <span class="expertise-tag">Auto Scaling</span>
                                    <span class="expertise-tag">Cost Optimization</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="npc-card" data-npc="sarah_analyst">
                            <div class="npc-avatar sarah"></div>
                            <div class="npc-info">
                                <h3>Sarah</h3>
                                <p class="npc-title">데이터 분석가</p>
                                <p class="npc-description">대용량 데이터 처리와 분석에 전문가입니다</p>
                                <div class="npc-expertise">
                                    <span class="expertise-tag">S3</span>
                                    <span class="expertise-tag">Athena</span>
                                    <span class="expertise-tag">Lambda</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="npc-card" data-npc="mike_security">
                            <div class="npc-avatar mike"></div>
                            <div class="npc-info">
                                <h3>Mike</h3>
                                <p class="npc-title">보안 담당자</p>
                                <p class="npc-description">클라우드 보안과 규제 준수를 중시합니다</p>
                                <div class="npc-expertise">
                                    <span class="expertise-tag">VPC</span>
                                    <span class="expertise-tag">IAM</span>
                                    <span class="expertise-tag">Security</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="npc-card" data-npc="jenny_developer">
                            <div class="npc-avatar jenny"></div>
                            <div class="npc-info">
                                <h3>Jenny</h3>
                                <p class="npc-title">풀스택 개발자</p>
                                <p class="npc-description">서버리스와 최신 기술에 관심이 많습니다</p>
                                <div class="npc-expertise">
                                    <span class="expertise-tag">Lambda</span>
                                    <span class="expertise-tag">API Gateway</span>
                                    <span class="expertise-tag">DynamoDB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="selection-actions">
                        <button id="back-to-welcome-btn" class="secondary-btn">
                            <i class="fas fa-arrow-left"></i> 뒤로가기
                        </button>
                    </div>
                </div>
            </div>

            <!-- Game Screen -->
            <div id="game-screen" class="screen">
                <!-- NPC Dialogue Area -->
                <div class="npc-dialogue-area">
                    <div class="npc-character">
                        <div id="current-npc-avatar" class="npc-avatar-large"></div>
                        <div class="npc-status">
                            <h3 id="current-npc-name">NPC Name</h3>
                            <p id="current-npc-title">NPC Title</p>
                        </div>
                    </div>
                    
                    <div class="dialogue-box">
                        <div id="dialogue-text" class="dialogue-text">
                            대화 내용이 여기에 표시됩니다...
                        </div>
                        <div class="dialogue-actions">
                            <button id="continue-dialogue-btn" class="dialogue-btn">계속</button>
                            <button id="skip-dialogue-btn" class="dialogue-btn secondary">건너뛰기</button>
                        </div>
                    </div>
                </div>

                <!-- Question Area -->
                <div class="question-area">
                    <div class="question-header">
                        <div class="question-meta">
                            <span class="question-category" id="question-category">EC2</span>
                            <span class="question-difficulty" id="question-difficulty">Medium</span>
                            <span class="question-points" id="question-points">100 pts</span>
                        </div>
                        <div class="question-timer">
                            <i class="fas fa-clock"></i>
                            <span id="question-timer">60s</span>
                        </div>
                    </div>
                    
                    <div class="scenario-box">
                        <h4 id="scenario-title">시나리오 제목</h4>
                        <p id="scenario-description">시나리오 설명이 여기에 표시됩니다.</p>
                        <div class="scenario-context">
                            <p id="scenario-context">추가 컨텍스트 정보</p>
                        </div>
                    </div>
                    
                    <div class="question-box">
                        <h3 id="question-text">문제가 여기에 표시됩니다.</h3>
                        
                        <div class="options-container" id="options-container">
                            <!-- Options will be dynamically generated -->
                        </div>
                        
                        <div class="question-actions">
                            <button id="hint-btn" class="hint-btn">
                                <i class="fas fa-lightbulb"></i>
                                힌트 (<span id="hint-count">3</span>)
                            </button>
                            <button id="submit-answer-btn" class="primary-btn" disabled>
                                답안 제출
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="result-screen" class="screen">
                <div class="result-content">
                    <div class="result-header">
                        <div id="result-icon" class="result-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2 id="result-title">정답입니다!</h2>
                        <p id="result-message">훌륭한 선택이었습니다!</p>
                    </div>
                    
                    <div class="result-details">
                        <div class="score-breakdown">
                            <h3>점수 상세</h3>
                            <div class="score-item">
                                <span>기본 점수:</span>
                                <span id="base-score">100</span>
                            </div>
                            <div class="score-item">
                                <span>난이도 보너스:</span>
                                <span id="difficulty-bonus">+50</span>
                            </div>
                            <div class="score-item">
                                <span>시간 보너스:</span>
                                <span id="time-bonus">+20</span>
                            </div>
                            <div class="score-item penalty">
                                <span>힌트 페널티:</span>
                                <span id="hint-penalty">-10</span>
                            </div>
                            <div class="score-item total">
                                <span>총 점수:</span>
                                <span id="total-score">160</span>
                            </div>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>해설</h3>
                            <p id="explanation-text">문제 해설이 여기에 표시됩니다.</p>
                        </div>
                        
                        <div class="learning-resources" id="learning-resources">
                            <h3>추가 학습 자료</h3>
                            <!-- Learning resources will be dynamically added -->
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button id="next-question-btn" class="primary-btn">다음 문제</button>
                        <button id="review-answer-btn" class="secondary-btn">답안 검토</button>
                        <button id="end-session-btn" class="secondary-btn">세션 종료</button>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Screen -->
            <div id="leaderboard-screen" class="screen">
                <div class="leaderboard-content">
                    <h2>리더보드</h2>
                    
                    <div class="leaderboard-tabs">
                        <button class="tab-btn active" data-type="alltime">전체</button>
                        <button class="tab-btn" data-type="monthly">월간</button>
                        <button class="tab-btn" data-type="weekly">주간</button>
                        <button class="tab-btn" data-type="daily">일간</button>
                    </div>
                    
                    <div class="leaderboard-list" id="leaderboard-list">
                        <!-- Leaderboard entries will be dynamically generated -->
                    </div>
                    
                    <div class="user-rank-info">
                        <h3>내 순위</h3>
                        <div class="rank-card">
                            <div class="rank-position" id="user-rank-position">-</div>
                            <div class="rank-details">
                                <p class="rank-score">점수: <span id="user-rank-score">0</span></p>
                                <p class="rank-percentile">상위 <span id="user-percentile">0</span>%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="leaderboard-actions">
                        <button id="back-to-game-btn" class="primary-btn">게임으로 돌아가기</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Hint Modal -->
        <div id="hint-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>힌트</h3>
                    <button class="modal-close" id="hint-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="hint-content">
                        <div class="npc-hint-avatar">
                            <div id="hint-npc-avatar" class="npc-avatar-small"></div>
                        </div>
                        <div class="hint-text" id="hint-text">
                            힌트 내용이 여기에 표시됩니다.
                        </div>
                    </div>
                    <div class="hint-penalty-info">
                        <p>이 힌트를 사용하면 <span id="hint-penalty-points">10</span>점이 차감됩니다.</p>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="use-hint-btn" class="primary-btn">힌트 사용</button>
                    <button id="cancel-hint-btn" class="secondary-btn">취소</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>설정</h3>
                    <button class="modal-close" id="settings-modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>게임 설정</h4>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="hints-enabled" checked>
                                힌트 사용 허용
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="sound-enabled" checked>
                                사운드 효과
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="animations-enabled" checked>
                                애니메이션 효과
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>난이도 설정</h4>
                        <div class="setting-item">
                            <label for="preferred-difficulty">선호 난이도:</label>
                            <select id="preferred-difficulty">
                                <option value="auto">자동 조절</option>
                                <option value="easy">쉬움</option>
                                <option value="medium">보통</option>
                                <option value="hard">어려움</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="save-settings-btn" class="primary-btn">저장</button>
                    <button id="cancel-settings-btn" class="secondary-btn">취소</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="game.js"></script>
    <script src="npc_system.js"></script>
    <script src="ui_components.js"></script>
</body>
</html>
